# 146. LRU Cache

---

js 写了个暴力实现，然后 timeout 了…… 

这种问题，主要耗时是要剔除哪个节点。
要么在 get 的时候计算，要么在 set 的时候计算。
刚才写的时候，直接用 map 来实现，set 的时候，遍历了一次，所以耗时较多。
想了下，改成 list，然后每次 get 时依照访问量做一些调整，应该会快不少才对。

---

写好一个稍嫌麻烦的 js 之后，发现报错完全不能理解，expected 不对吧……

---

看了下讨论区答案，理解错误了，和 GET 次数无关。
和 GET 有关的，是啥缓存来着…… 
框架倒是对了，判断代码要改一下。

---

```js
var LRUCache = function(capacity) {
    this.capacity = capacity;
    this.list = [];
    this.map = {};
};

LRUCache.prototype.get = function(key) {
    var item = this.map[key];
    if (item) {
        var idx = this.list.indexOf(key);
        this.list.splice(idx, 1);
        this.list.push(key);
        return item;
    } else {
        return -1;
    }
};

LRUCache.prototype.set = function(key, value) {
    if (this.map[key]) {
        var idx = this.list.indexOf(key);
        this.list.splice(idx, 1);
    } else {
        if (this.capacity) {
            this.capacity--;
        } else {
            var del = this.list.shift();
            this.map[del] = undefined;
        }
    }
    this.map[key] = value;
    this.list.push(key);
};
```

早上想到，随手写两句。

关于标准库

JS 中部分 API 是自下而上的，把社区或其他社区的实践吸收到标准中。
典型像 jQuery 到 DOM，其他还有 Promise，Async/Await 之类的特性，lodash 之类的扩充工具。

而另一些，完全是自上而下的，搞出残废的标准。
典型的有 import/export，Node 端还可以靠预处理、靠版本更新，前端呢，Module loader 都没有标准的实现。
其他像 class/let 之类的语法，完全的意义不明。

---

和 js 没太大关系

这两天在看 swift，一个感觉是语法好多。
我是认为语法核心应该尽可能的简单、统一。
像 `...` 这种语法，完全可以由标准库来实现，没必要作为语法的一部分吧。

另外，包管理器似乎还在开发，这点也很不友好。
语言应该是小的语法核心，小的标准库，丰富的周边库才对。
大量的库可以通过包管理器去更新，而不是打包在版本里。

模块，应该有完整的命名空间隔离。
然后可以选择性地依赖相同模块的不同版本。
版本方面，语义化版本号根本并没那么可靠吧，还是应该默认锁死版本才对。

---

还是和 js 没关系，主要是 swift。

1. 即将发布的 swift3 不兼容 swift2.2，具体改了什么没仔细看。
其实我个人对向后兼容没什么兴趣。
但 python3/python2 和 lua5.3/luajit 都是升级不成功的例子吧。
只有 js 这种激进的社区，没有条件也要创造条件，而且什么特性都死命往里加。
不过 swift 没有那么大的包袱，而且 linux 的支持会更好些，感觉还是可以试试。

2. 这两天看 swift 的感觉，语法元素太多。
断断续续看了两三天了，还在看很基础的部分。
虽然这个算是我自己的问题。

3. 自带方法、标准库，都好小。
可能写 iOS 的同学，或者对 OC 比较熟悉的同学，没有这种感觉。
随便看了一下 swift 语法，然后想写一个 swapview 练练手。
发现这不好搞，那不好弄……文件处理、字符串处理，都只能 google……
在 mac 上测试得差不多了，跑到 docker 里跑一下，发现 linux 下没有完整的 Foundation 支持。
真的是不会再爱了……
只能说，swift 的目标就不是通用的编程语言。

---

关于 lua

有 math.floor／math.ceil，但是没有 math.round。
搜了一下，邮件列表里居然还有争论是否需要 math.round。
然后有人回复说 `math.floor(n) = -math.ceil(-n)` 所以 ceil/floor 也可以去掉的一个。
哈哈哈

`elseif` 也算是个槽点吧，和 python 一样没有简单明了的 else if，非要奇怪组合。

---

关于 swift

终于把 swift 浏览完了。后面看得比较快。
看一个语言应该关注什么呢。

基本类型
基本的逻辑语句
类型和继承
extension 扩展对象
protocol 定义接口
泛型
异常处理
ARC
optional chaining

很特别的一点是 nil 机制吧。
optional chaining 和 optional value，到处 `?` 和 `!`。
感觉确实能简化很多东西。

其他的，ARC 虽然没接触过，但是 weak reference 这种东西还是知道的。

再剩下的，其实就不是很感兴趣了。
swift 的学习，可能到这就告一段落吧。
